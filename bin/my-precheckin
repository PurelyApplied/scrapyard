#!/usr/bin/env bash

# I think this might fail on Linux.  I remember sed's options being different.

if [ "${GEMFIRE_DEPLOYMENTS_ROOT}" == "" ] ; then
    echo "Cannot run $0 without GEMFIRE_DEPLOYMENTS_ROOT defined."
    exit 2
else
    lspipes () {
        ${GEMFIRE_DEPLOYMENTS_ROOT}/precheckin/list_developer_pipelines.sh
    }
fi

myTag="prhomberg"
precheckinTarget="precheckin"
precheckinUrlBase="http://precheckin.gemfire.pivotal.io/teams/main/pipelines/"

clear

for p in $(lspipes | grep "${myTag}" | sort) ; do
    printf "${p}:\n    ${precheckinUrlBase}${p}\n"
    fly -t ${precheckinTarget} js -p ${p}
    echo
done
